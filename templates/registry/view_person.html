{% extends 'base.html' %}
{% block page_title %} {{block.super}} Register {% endblock page_title%}

{% load staticfiles %}

{% load app_filters %}

{% block style_code %}
    <link href="{% static 'plugins/datatables/css/data-table.css' %}" rel="stylesheet" />
{% endblock %}
    
{% block primary %}
<!-- begin breadcrumb -->
<ol class="breadcrumb pull-right">
    <li><a href="#">Home</a></li>
    <li class="active">Registry</li>
</ol>
<!-- end breadcrumb -->
<!-- begin page-header -->
<h3 class="page-header">Registry <small>Person Details</small></h3>
<!-- end page-header -->
{% if messages %}
<div id="messages" class="alert alert-success fade in">
    <span class="close" data-dismiss="alert">×</span>
    <i class="fa fa-check fa-2x pull-left"></i>
    <ul class="messages">
        {% for message in messages %}
        <li{% if message.info %} class="{{ message.info }}"{% endif %}>{{ message }}</li>
        {% endfor %}
    </ul>
</div>
{% endif %}
{% if message %}
    <div id="messages" class="alert alert-success fade in">
        <span class="close" data-dismiss="alert">×</span>
        <i class="fa fa-check fa-2x pull-left"></i>
        <p class="invalid-form-message"> {{ message }}</p>
    </div>
{% endif %}
<!-- begin row -->
<div class="row">
    <!-- Start content area -->
    <!-- begin profile-container -->
            <div class="profile-container">
                <!-- begin profile-section -->
                <div class="profile-section">
                    <!-- begin profile-left -->
                    <div class="profile-left">
                        <!-- begin profile-image -->
                        <div class="profile-image">
                            <img src="/static/img/user-2.jpg" />
                            <i class="fa fa-user hide"></i>
                        </div>
                        <!-- end profile-image -->                      
                        <!-- begin profile-highlight -->
                        <div class="profile-highlight">
                            <h4><i class="fa fa-cog"></i> Only Registry Persons</h4>
                        </div>
                        <!-- end profile-highlight -->
                    </div>
                    <!-- end profile-left -->

                    <!-- begin profile-right -->
                    <div class="profile-right">
                        <!-- begin profile-info -->
                        <div class="profile-info">
                            <!-- begin table -->
                            <div class="table-responsive">
                                <table class="table table-profile">
                                    <thead>
                                        <tr>
                                            <th width="30%"></th>
                                            <th>
                                            <h4>{{ person_details.first_name }} {{ person_details.surname }}
                                                <br>
                                                <br>
                                                <small><b>
                                                {% if person_details.date_of_death == None %}
                                                    Alive
                                                {% else %}
                                                    Date Of Death {{ person_details.date_of_death }}
                                                {% endif %}
                                                </b></small>
                                            </h4>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="field">Person ID : </td>
                                            <td>{{ person_details.id}}</td>
                                        </tr>
                                        {% for ptype in person_details.ptypes %}
                                        <tr>
                                            <td class="field">Person Type : </td>
                                            <td>{{ ptype.person_type_id|gen_value:vals }}</td>
                                        </tr>
                                        {% endfor %} 
                                        <tr>
                                            <td class="field">Person First Name : </td>
                                            <td>{{ person_details.first_name }}</td>
                                        </tr>
                                        <tr>
                                            <td class="field">Person Other Names : </td>
                                            <td>{{ person_details.other_names }}</td>
                                        </tr>
                                        <tr>
                                            <td class="field">Person Surname : </td>
                                            <td>{{ person_details.surname }}</td>
                                        </tr>
                                        <tr>
                                            <td class="field">Sex: </td>
                                            <td>{{ person_details.sex_id|gen_value:vals }}</td>
                                        </tr>
                                        <tr>
                                            <td class="field">Phone Number : </td>
                                            <td>{{ person_details.des_phone_number }}</td>
                                        </tr>
                                        <tr>
                                            <td class="field">Date Of Birth : </td>
                                            <td>{{ person_details.date_of_birth }}</td>
                                        </tr>
                                        <tr>
                                            <td class="field">Email Address : </td>
                                            <td>{{ person_details.email}}</td>
                                        </tr>
                                        
                                        {% for pgeoloc in person_details.pgeolocs %}
                                        <tr>
                                            <td class="field">Living in : </td>
                                            <td>{{ pgeoloc.area_name }}</td>
                                        </tr>
                                        {% endfor %}


                                        {% for porg in person_details.porgs%}
                                        <tr>
                                            <td class="field">Organizational Unit(s) : </td>
                                            <td>{{ porg.org_unit_id|gen_value:vals}}</td>
                                            
                                        </tr>
                                        {% endfor %}

                                        {% for pextid in person_details.pextids %}
                                        <tr>
                                            <td class="field">{{ pextid.identifier_type_id|gen_value:vals }} : </td>
                                            <td>{{ pextid.identifier }}</td>
                                        </tr>
                                        {% endfor %} 

                                        <tr>
                                            <td class="field">Relationship(s) : </td>
                                            {% if person_details.relationship_type_id %}
                                            <td>{{ person_details.relationship_type_id|gen_value:vals }}</td>
                                            {% else %}
                                            <td>No relationships to view</td>
                                            {% endif %}
                                        </tr>

                                        <tr>
                                        <td class="field"></td>
                                        <td>
                                            <button id="btn_edit_details" onClick="window.location.href='/registry/edit_person/{{ person_details.pk }}'" class="btn  btn-sm btn-primary m-r-5">
                                             Edit Person Details
                                            </button>
                                        </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <!-- end table -->
                        </div>
                        <!-- end profile-info -->
                    </div>
                    <!-- end profile-right -->
                </div>
                <!-- end profile-section -->
                <!-- begin profile-section -->
                <div class="profile-section">
                    <!-- begin row -->
                    <div class="row">
                        <!-- begin col-4 -->
                        <div class="col-md-4">
                            <h4 class="title">Message <small>0 messages</small></h4>
                            <!-- begin scrollbar -->
                            <div data-scrollbar="true" data-height="280px" class="bg-silver">
                                <!-- begin chats -->
                                
                                <!-- end chats -->
                            </div>
                            <!-- end scrollbar -->
                        </div>
                        <!-- end col-4 -->
                        <!-- begin col-4 -->
                        <div class="col-md-4">
                            <h4 class="title">Other details <small>0 incomplete</small></h4>
                            <!-- begin scrollbar -->
                            <div data-scrollbar="true" data-height="280px" class="bg-silver">
                                <!-- begin table -->
                                
                                <!-- end table -->
                            </div>
                            <!-- end scrollbar -->
                        </div>
                        <!-- end col-4 -->
                        <!-- begin col-4 -->
                        <div class="col-md-4">
                            <h4 class="title">Tasks <small>20 pending</small></h4>
                            <!-- begin scrollbar -->
                            <div data-scrollbar="true" data-height="280px" class="bg-silver">
                                <!-- begin todolist -->
                                
                                <!-- end todolist -->
                            </div>
                            <!-- end scrollbar -->
                        </div>
                        <!-- end col-4 -->
                    </div>
                    <!-- end row -->
                </div>
                <!-- end profile-section -->
            </div>
            <!-- end profile-container -->
    <!-- End content area -->
</div>
<!-- end row -->
{% endblock %}

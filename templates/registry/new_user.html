
{% extends 'base.html' %}
{% block page_title %} {{block.super}} Register {% endblock page_title%}

{% load staticfiles %}

{% block extra_styling%}
<link href="{% static 'plugins/DataTables/css/data-table.css' %}" rel="stylesheet" />
{% endblock extra_styling%}



{% block extra_javascript%}
<script type="text/javascript" src="{% static 'plugins/bootstrap/js/bootstrap.min.js' %}"></script>
<script>
window.onload = function(e)
{ 
    var elem = document.getElementById("person_id");
    elem.value = localStorage.getItem("person_id");

    document.getElementById('person_name').innerHTML = localStorage.getItem("person_name");;
    //console.log("Setting value of person_id to : " + localStorage.getItem("person_id")); 
}
</script>
{% endblock extra_javascript%}

{% block primary%}
<h1 class="page-header">Workforce Registry</h1>
<p></p>

{% if messages %}
<div id="messages" class="alert alert-danger fade in">
    <span class="close" data-dismiss="alert">Ã—</span>
    <i class="fa fa-check fa-2x pull-left"></i>
    <ul class="messages">
        {% for message in messages %}
        <li{% if message.error %} class="{{ message.danger }}"{% endif %}>{{ message }}</li>
        {% endfor %}
    </ul>
</div>
{% endif %}

<!-- begin row -->
<div class="row">
        <!-- begin col-12 -->
        <div class="col-md-12">
                <!-- begin panel -->
                <div class="panel panel-inverse">
                    <div class="panel-heading">
                        <div class="panel-heading-btn">
                                <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-expand"><i class="fa fa-expand"></i></a>
                                <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning" data-click="panel-collapse"><i class="fa fa-minus"></i></a>
                        </div>                        
                        <h4 class="panel-title">Create User Profile | <span id="person_name"></span></h4>
                    </div>
                    <div class="panel-body panel-form">
                        <form class="form-horizontal form-bordered" action="{% url 'new_user' %}" method="POST" data-parsley-validate="true" name="demo-form" >

                            {% csrf_token %} 
                            <div class="form-group">
                            <div class="col-md-6 col-sm-6">
                               <b>{{ form.person_id }}</b>
                            </div>
                            </div>             
                            <div class="form-group">
                                <label class="control-label col-md-4 col-sm-4">Username :</label>
                                <div class="col-md-6 col-sm-6">
                                    <b>{{ form.username }}</b>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-4 col-sm-4">Password: :</label>
                                <div class="col-md-6 col-sm-6">
                                    <b>{{ form.password1 }}</b>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-4 col-sm-4">Password(Again):</label>
                                <div class="col-md-6 col-sm-6">
                                    <b>{{ form.password2}}</b> 
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-4 col-sm-4"></label>
                                <div class="col-md-6 col-sm-6">
                                
                                    {% if error_msg %}
                                    <p>
                                        <div class="alert alert-danger fade in m-b-15"><b>{{ error_msg }}<b></div> 
                                    </p>
                                    {% endif %}

                                    <button type="submit" class="btn btn-primary">Submit</button>
                                </div>
                            </div>
                        </form>

                </div>
                <!-- end panel -->
</div>

{% endblock primary%}


{% block lazy_javascript_code %} 
<script src="/static/plugins/parsley/dist/parsley.js"></script>

<script>
    $(document).ready(function() {
        App.init();
    });
</script>
<script src="{% static 'js/apps.js' %}"></script>
{% endblock lazy_javascript_code%}